# [口诀]设计模式速记小故事

> 按自己的脑洞稍微整理了一下, 但实际上不准确

- 23 种设计模式的通俗解释，虽然有点污，但是秒懂 @nice @digest @fun
  - 写的非常有趣, 这个作者实在太有才了 
  - @by <https://www.zhihu.com/people/leslietonychan>
  - @doc <https://mp.weixin.qq.com/s/SZuw-rSq5SwJ9yhlYLY2RQ>

```
// 工厂方法(豪点汉堡)
场景: 去麦当劳或肯德基(工厂)看到一个MM, 为了装阔说了句“来4个不同口味的汉堡”
表现: 平时无论去哪家店点单, 都是这么说的, 都不用改口 
原理: 客户类和工厂类分开了

// 建造者模式(语音翻译)
场景: 突然发现这居然是位香港MM, 但不知道怎么说“你好”
表现: 于是打开手机翻译App(建造者)看到每种语言都对应一个按键, 于是点了一下粤语
原理: 创建过程生成了具有不同内部表象的产品对象

// 抽象工厂(自行挑选汉堡)
场景: 你成功吸引了对方的注意力, 借口说汉堡点多了恳请TA帮忙, 但完全不知道TA爱吃什么口味
表现: 于是你(抽象工厂)让MM自己凭借喜好任意挑选一个
原理: 核心工厂类将具体创建的工作移交给了子类

// 原型模式(情话语录)
场景: 一番自认为不错的表现后回家, 开始跟MM用QQ聊天, 这时候免不了要说各种“骚话”
表现: 幸亏平时自己就挺注意搜集各种肉麻的情话(原型)的, 关键时刻就拿出来了
原理: 克隆(clone)又不难

// 单例模式(韦小宝和他的老婆)
场景: 当晚彻夜难眠, 不禁想起韦小宝(单例)曾经追求过7个MM
表现: 最后她们喊的老公却是同一个人(怎么会有这种好事)
原理: 想法子确保某一个类只有一个实例

// 适配器模式(朋友翻译机)
场景: 第二天早上很巧再次见到MM，但毕竟粤语也不是速成的
表现: 于是求助会讲粤语的好友(适配器)坐一桌, 代为翻译
原理: 将接口变换成客户端所期待的另一种接口

// 桥梁模式(组合夸奖拳)
场景: 你开始热情地向MM问好, 并顺便将TA从头到脚夸赞了一番
表现: “你的发型+口红+裙子+...(组合)都好好看哦”, MM说, “要是有件当季时尚的衣服就更好了...”
原理: 用组合关系让夸赞能随机应变

// 合成模式(买三件套)
场景: 于是带MM去商场买衣服
表现: TA慢悠悠地依次指了一个三件套(合成), 然后说“除了那三件都要”(取补集)
原理: 把部分与整体的关系用树结构表示出来

// 装饰模式(包装袋)
场景: 眼见MM买了那么多衣服, 总不能让TA徒手抱回家吧
表现: 于是服务员非常有眼力见地找了很多漂亮纸袋包起来(装饰), 方便能拎手上 
原理: 用对客户端透明的方式扩展对象的功能

// 门面模式(相机自动挡)
场景: 你含泪买单后, 打算用专业的Nikon相机给MM拍照, 便手动调光圈快门
表现: 一顿操作猛如虎, 最后发现还是自动挡(门面)好用...
原理: 提供一个高层次的接口，使得子系统更易于使用

// 享元模式(群发短信换称呼)
场景: 晚上MM给你回复感谢短信, 但内容(享元)毫无新意, 仿佛换个称呼就可以再发给别人
表现: 你终于意识到那是群发短信, 而自己不过是池塘里的一条鱼
原理: 以共享的方式高效的支持大量的细粒度对象

// 代理模式(安排相亲)
场景: 你开始觉得凡是偶遇的MM都不靠谱, 打死也不相信爱情了
表现: 于是你终于松口答应家里安排的相亲(代理), 同时自己也觉得不能因此荒废学业
原理: 给某一个对象提供一个代理对象，并由代理对象控制对源对象的引用

// 责任链模式(传纸条)
场景: 晚上去上英语课，落寞地坐到了最后一排, 突然发现前面坐着很多漂亮的MM
表现: 便写了张纸条, “Hi, 可以做我的女朋友吗？如果不愿意请向前传(职责链)”
原理: 在不影响客户端的情况下动态的重新组织链和分配责任

// 命令模式(被迫传话)
场景: 中途居然被一个男生截下了...他表示自己姐姐是位漂亮MM(果然如此), 可以代为传书 
表现: 为了感谢他，请他吃了碗炸酱面
      哪知道他说：“我在我姐姐淫威下(命令)同时给TA三个男朋友送信，就数你最小气，才请我吃面。”
原理: 把一个请求或者操作封装到一个对象中

// 解释器模式(真经解释)
场景: 意识到压力巨大, 为了竞争上岗, 你开始学《泡MM真经》
表现: 里面讲到了跟 MM 约会的脚本(解释), 照着做就行
原理: 定义出其文法的一种表示，并同时提供一个解释器


// 模板方法模式(序言套路)
场景: 《泡MM真经-序言》提纲挈领
表现: 讲述了包括巧遇、打破僵局、展开追求、接吻、前戏、不可细说、不可描述、不可**八大步骤(模板)
原理: 准备一个抽象类，将部分逻辑以具体方法以及具体构造子的形式实现，然后声明一些抽象方法来迫使子类实现剩余的逻辑

// 策略模式(约会策略)
场景: 其中《泡MM真经-展开追求篇》讲到跟不同类型的 MM 约会, 要用不同的方法(策略)
表现: 有的请电影比较好，有的则去吃小吃效果不错，有的去海边浪漫最合适
原理: 把行为和环境分开

// 状态模式(约看电影的反应)
场景: 初期, 为了保守起见, 你打算先约MM去看电影, MM反应(状态)可能如下
表现: A) 对你没兴趣的 MM 就会说 “有事情啦”
     B) 对你不讨厌但还没喜欢上的 MM 就会说 “好啊，不过可以带上我闺蜜么？”
     C) 已经喜欢上你的 MM 就会说 “几点钟？要带上身份证吗？”
原理: 允许一个对象在其内部状态改变的时候改变行为

// 调停者模式(打麻将)
场景: MM选了B, 而且一下子带了3个闺蜜, 这时候改道陪MM和闺蜜打麻将为宜，但她们相互之间谁应该给谁多少钱算不清楚
表现: 你在旁边说，按照各自的筹码数算钱，赚了钱的从你(调停者)这里拿，赔了钱的也付给你
原理: 对象的行为和协作抽象化

// 备忘录模式(和MM多个闺蜜套近乎)
场景: 为了博MM好感, 你打算和TA的闺蜜套近乎, 于是同时跟MM的3位闺蜜多线聊天
表现: 为此还特地准备了笔记(备忘录), 好记清楚到底跟MM闺蜜说了多少昧良心的鬼话, 方便下次接着说
原理: 一个用来存储另外一个对象内部状态的快照的对象

// 观察者模式(闺蜜情报局)
场景: 闺蜜们(观察者)想着为了排除未来的竞争对手, 在你的怂恿下成立了关于MM的情报邮件组, 有情况直接发布到邮件组
表现: 就这样不用一个一个通知你, 你(订阅者)就能及时收到情报
原理: 定义了一种一对多的依赖关系，让多个观察者对象同时监听某一个主题对象

// 访问者模式(情人节送多份礼物)
场景: 情人节到了，你发现自己已经爱上了MM, 准备给TA送一束鲜花和一张卡片, 但不知道怎么送合适
表现: 于是让花店老板(访问者1??)根据 MM 的特点选一束花，让礼品店老板(访问者2)也对应选一张卡, MM收到礼物后对此非常开心
原理: 封装一些施加于某种数据结构元素之上的操作

// 迭代模式(求婚成功后)
场景: 几个月后, 你不顾一切地向MM求婚, TA居然答应了(毕竟大结局了)
表现: 于是你开始准备结婚事宜, 从买钻戒到买房再到买车(迭代), happy ending!!!
原理: 顺序访问一个聚集中的元素而不必暴露聚集的内部表象
```